FROM node:12.22.1-alpine as builder
LABEL maintainer="Fabian Mor√≥n Zirfas"
LABEL description="A frontend for a the  postgres/postgis api used in the project flusshygiene"
ARG PORT
ARG REACT_APP_MAPBOX_API_TOKEN
ARG REACT_APP_AUTH0_DOMAIN
ARG REACT_APP_AUTH0_CLIENTID
ARG REACT_APP_AUTH0_AUDIENCE
ARG REACT_APP_EVENT_SOURCE_URL
ARG REACT_APP_API_HOST

ENV PORT $PORT
ENV REACT_APP_MAPBOX_API_TOKEN $REACT_APP_MAPBOX_API_TOKEN
ENV REACT_APP_AUTH0_DOMAIN $REACT_APP_AUTH0_DOMAIN
ENV REACT_APP_AUTH0_CLIENTID $REACT_APP_AUTH0_CLIENTID
ENV REACT_APP_AUTH0_AUDIENCE $REACT_APP_AUTH0_AUDIENCE
ENV REACT_APP_EVENT_SOURCE_URL $REACT_APP_EVENT_SOURCE_URL
ENV REACT_APP_API_HOST ""
ENV NODE_ENV=development
WORKDIR /usr/app
COPY ./package*.json ./
RUN npm ci
COPY ./ ./
EXPOSE 3000
ENTRYPOINT [ "npm", "start", "--" ]